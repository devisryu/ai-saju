<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google-adsense-account" content="ca-pub-2083185896839525">
  <title>AI ì‚¬ì£¼ â€” ì±—GPTê°€ ë´ì£¼ëŠ” ìš´ì„¸</title>

  <!-- AdSense ë¡œë”: í˜ì´ì§€ì— 'í•œ ë²ˆë§Œ', headì— ë‘ëŠ” ê±¸ ê¶Œì¥ -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2083185896839525" crossorigin="anonymous"></script>

  <style>
    :root{ --bg:#0b0f14; --card:#121823; --ink:#e7eefb; --muted:#a9b7d0; --accent:#7cc3ff; }
    *{ box-sizing:border-box }
    body{ margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, sans-serif; background:var(--bg); color:var(--ink); }
    .wrap{ max-width:720px; margin:0 auto; padding:16px 16px 120px; }
    .card{ background:var(--card); border-radius:16px; padding:16px; margin:12px 0; }
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    @media (max-width:640px){ .row{ grid-template-columns:1fr; } }
    label{ display:block; font-size:.9rem; color:var(--muted); margin:8px 0 4px }

    /* ì…ë ¥ ê¸°ë³¸ */
    input{
      width:100%;
      min-width:0;
      background:#0e1420;
      color:var(--ink);
      border:1px solid #1d2738;
      border-radius:10px;
      padding:12px;
      outline:none;
      color-scheme: dark;
    }

    /* ì»¤ìŠ¤í…€ ì•„ì´ì½˜ */
    input[type="date"]::-webkit-calendar-picker-indicator,
    input[type="time"]::-webkit-calendar-picker-indicator{ opacity:0; pointer-events:none; }
    .picker-wrap{ position:relative; }
    .picker-wrap input{ padding-right:44px; }
    .picker-btn{
      position:absolute; right:10px; top:50%; transform:translateY(-50%);
      width:28px; height:28px; border-radius:8px; background:#0e1420; border:1px solid #22324a;
      display:flex; align-items:center; justify-content:center; cursor:pointer;
    }
    .picker-btn:hover{ border-color:#2f4b78; }
    .picker-btn svg{ width:16px; height:16px; fill:#ffffff; opacity:.95; }

    .actions{ display:flex; gap:8px; margin-top:12px; flex-wrap:wrap }
    .btn{ background:#1a2536; border:1px solid #22324a; color:#fff; padding:10px 12px; border-radius:12px; cursor:pointer }
    .btn.primary{ background:linear-gradient(180deg,#2a64ff,#1846ff); border:none }
    .tabbar{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px }
    .tab{ background:#101725; border:1px solid #23324a; color:#cfe2ff; padding:8px 10px; border-radius:999px; font-size:.92rem; cursor:pointer }
    .tab.active{ outline:2px solid var(--accent) }
    .result{ white-space:pre-wrap; line-height:1.6 }
    .muted{ color:var(--muted) }

    footer.banner{ position:fixed; left:0; right:0; bottom:0; background:#0c111b; border-top:1px solid #1d2738; padding:8px; z-index:1 }

    /* ê´‘ê³  ì»¨í…Œì´ë„ˆ: ê³ ì • height ì œê±°, í•„ìš”ì‹œ ìµœì†Œ ë†’ì´ë§Œ */
    .ad{ min-height: 90px; display:flex; align-items:center; justify-content:center; border-radius:12px }
    .actions,.card{ position:relative; z-index:2 }

    /* ê¶í•© ì…ë ¥ì¹¸ í† ê¸€ (ë³´ì¼ ë•Œë„ grid ìœ ì§€) */
    #partner-section{ display:none; }
    #partner-section.show{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:8px;
    }
    @media (max-width:640px){
      #partner-section.show{ grid-template-columns:1fr; }
    }
  </style>
</head>
<body>
  <div class="card" style="margin-bottom:20px;">
  <h2>AI ì‚¬ì£¼ë€?</h2>
  <p>
    AIì‚¬ì£¼ëŠ” ChatGPTë¥¼ í™œìš©í•´ ì˜¤ëŠ˜ì˜ ìš´ì„¸, ì¬ë¬¼ìš´, ì—°ì• ìš´, ê¶í•© ë“±ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.
    ë³¸ ì„œë¹„ìŠ¤ëŠ” ì¬ë¯¸ì™€ ìê¸° ì„±ì°°ì„ ìœ„í•œ ì°¸ê³ ìš©ìœ¼ë¡œ ì œê³µë˜ë©°, ê³¼í•™ì  ê·¼ê±°ê°€ ìˆëŠ” ì˜ˆì¸¡ì´ë‚˜ í™•ì • ì¡°ì–¸ì€ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  </p>
  <p>
    ë‹¨ìˆœí•œ ìš´ì„¸ë¥¼ ë„˜ì–´, í•˜ë£¨ë¥¼ ê¸ì •ì ìœ¼ë¡œ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ì§§ì€ ì¡°ì–¸ê³¼ í˜„ì‹¤ì ì¸ íŒì„ ì œê³µí•©ë‹ˆë‹¤.
    â€˜ì˜¤ëŠ˜â€™, â€˜í•œë‹¬â€™, â€˜ë‚´ë…„â€™ ë“± ë‹¤ì–‘í•œ ê¸°ê°„ë³„ ìš´ì„¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.
  </p>
</div>
  <div class="wrap">
    <div class="card">
      <div class="muted">ìµœì†Œ ì •ë³´ë§Œ ì…ë ¥</div>

      <div class="row">
        <div>
          <label>ìƒë…„ì›”ì¼</label>
          <div class="picker-wrap">
            <input type="date" id="birthDate" />
            <button class="picker-btn" type="button" data-target="birthDate" aria-label="ë‹¬ë ¥ ì—´ê¸°">
              <svg viewBox="0 0 24 24"><path d="M7 2v2H5a2 2 0 0 0-2 2v2h18V6a2 2 0 0 0-2-2h-2V2h-2v2H9V2H7zm14 8H3v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V10z"/></svg>
            </button>
          </div>
        </div>
        <div>
          <label>íƒœì–´ë‚œ ì‹œê°„ (ëª¨ë¥´ë©´ 00:00)</label>
          <div class="picker-wrap">
            <input type="time" id="birthTime" value="00:00" />
            <button class="picker-btn" type="button" data-target="birthTime" aria-label="ì‹œê³„ ì—´ê¸°">
              <svg viewBox="0 0 24 24"><path d="M12 1a11 11 0 1 0 0 22 11 11 0 0 0 0-22zm1 11.414V6h-2v7h.002L13 15l1.414-1.414L13 12.414z"/></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- ê¶í•©ìš© ì…ë ¥ì¹¸ -->
      <div id="partner-section">
        <div>
          <label>ìƒëŒ€ ìƒë…„ì›”ì¼</label>
          <div class="picker-wrap">
            <input type="date" id="partnerDate" />
            <button class="picker-btn" type="button" data-target="partnerDate" aria-label="ë‹¬ë ¥ ì—´ê¸°">
              <svg viewBox="0 0 24 24"><path d="M7 2v2H5a2 2 0 0 0-2 2v2h18V6a2 2 0 0 0-2-2h-2V2h-2v2H9V2H7zm14 8H3v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V10z"/></svg>
            </button>
          </div>
        </div>
        <div>
          <label>ìƒëŒ€ íƒœì–´ë‚œ ì‹œê°„</label>
          <div class="picker-wrap">
            <input type="time" id="partnerTime" value="00:00" />
            <button class="picker-btn" type="button" data-target="partnerTime" aria-label="ì‹œê³„ ì—´ê¸°">
              <svg viewBox="0 0 24 24"><path d="M12 1a11 11 0 1 0 0 22 11 11 0 0 0 0-22zm1 11.414V6h-2v7h.002L13 15l1.414-1.414L13 12.414z"/></svg>
            </button>
          </div>
        </div>
      </div>

      <div class="tabbar" id="tabs">
        <button class="tab active" data-type="today" type="button">ì˜¤ëŠ˜</button>
        <button class="tab" data-type="month" type="button">í•œë‹¬</button>
        <button class="tab" data-type="nextyear" type="button">ë‚´ë…„</button>
        <button class="tab" data-type="wealth" type="button">ì¬ë¬¼</button>
        <button class="tab" data-type="love" type="button">ì—°ì• /ê²°í˜¼</button>
        <button class="tab" data-type="work" type="button">í•™ì—…/ì§ì—…</button>
        <button class="tab" data-type="lotto" type="button">ë¡œë˜</button>
        <button class="tab" data-type="match" type="button">ê¶í•©</button>
      </div>

      <div class="actions">
        <button class="btn primary" id="btn-go" type="button">ë¶„ì„í•˜ê¸°</button>
        <button class="btn" id="btn-share" type="button">ê³µìœ í•˜ê¸°</button>
      </div>

      <!-- ìƒë‹¨ ê´‘ê³  -->
      <div class="ad" style="border:none; padding:0;">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-2083185896839525"
             data-ad-slot="5762619290"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </div>
    </div>

    <div class="card">
      <div class="muted">ê²°ê³¼</div>
      <div id="result" class="result">ì…ë ¥ í›„ [ë¶„ì„í•˜ê¸°]ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
    </div>
  </div>

  <footer class="banner">
    <!-- í•˜ë‹¨ ê³ ì • ë°°ë„ˆ ê´‘ê³  -->
    <div class="ad" style="border:none; padding:0;">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-2083185896839525"
           data-ad-slot="5762619290"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const result = document.getElementById('result');
      const btnGo = document.getElementById('btn-go');
      const btnShare = document.getElementById('btn-share');
      const birthDateEl = document.getElementById('birthDate');
      const birthTimeEl = document.getElementById('birthTime');
      const partnerSection = document.getElementById('partner-section');
      const partnerDateEl = document.getElementById('partnerDate');
      const partnerTimeEl = document.getElementById('partnerTime');

      // íƒ­ í† ê¸€ + ê¶í•© ì…ë ¥ì¹¸ í‘œì‹œ
      let currentType = 'today';
      document.querySelectorAll('.tab').forEach(t =>
        t.addEventListener('click', () => {
          document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
          t.classList.add('active');
          currentType = t.dataset.type;
          partnerSection.classList.toggle('show', currentType === 'match');
        })
      );

      // ì»¤ìŠ¤í…€ ì•„ì´ì½˜ ë²„íŠ¼ â†’ input.showPicker()
      document.addEventListener('click', (e) => {
        const btn = e.target.closest('.picker-btn');
        if (!btn) return;
        const id = btn.getAttribute('data-target');
        const inp = document.getElementById(id);
        if (!inp) return;
        if (typeof inp.showPicker === 'function') inp.showPicker();
        else { inp.focus(); inp.click(); }
      });

      // ë¡œë˜
      const lotto = () => Array.from({length:45}, (_,i)=>i+1).sort(()=>Math.random()-0.5).slice(0,6).sort((a,b)=>a-b);

      // ë¶„ì„í•˜ê¸°
      btnGo.addEventListener('click', async () => {
        const birthDate = birthDateEl.value;
        const birthTime = birthTimeEl.value || '00:00';
        const partnerDate = partnerDateEl?.value;
        const partnerTime = partnerTimeEl?.value || '00:00';

        if (!birthDate) { alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.'); return; }
        if (currentType === 'match' && !partnerDate) { alert('ê¶í•©ì€ ìƒëŒ€ ìƒë…„ì›”ì¼ì´ í•„ìš”í•©ë‹ˆë‹¤.'); return; }

        if (currentType === 'lotto') {
          result.textContent = `ì´ë²ˆ ì£¼ ì°¸ê³ ìš© ë²ˆí˜¸\n${lotto().join(' Â· ')}\n(ì—”í„°í…Œì¸ë¨¼íŠ¸ ëª©ì )`;
          return;
        }

        result.textContent = 'ğŸ”® í•´ì„ ì¤‘...';
        try {
          const payload = { type: currentType, birthDate, birthTime, partnerDate, partnerTime, tz:'Asia/Seoul' };
          const r = await fetch('/api/saju', {
            method: 'POST',
            headers: { 'content-type': 'application/json' },
            body: JSON.stringify(payload)
          });
          const txt = await r.text();
          let data; try { data = JSON.parse(txt); } catch {}
          if (!r.ok) throw new Error(txt || 'API ì‹¤íŒ¨');
          result.textContent = (data && data.text) ? data.text : 'í•´ì„ì„ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.';
        } catch (e) {
          console.error(e);
          result.textContent = 'í•´ì„ì„ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
        }
      });

      // ê³µìœ í•˜ê¸°
      btnShare.addEventListener('click', async () => {
        const text = result.textContent || 'ì±—GPTë¡œ ìš´ì„¸ í™•ì¸!';
        try {
          if (navigator.share) await navigator.share({ title:'AI ì‚¬ì£¼', text, url: location.href });
          else { await navigator.clipboard.writeText(location.href); alert('ì£¼ì†Œë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.'); }
        } catch {}
      });
    });
  </script>
</body>
</html>
